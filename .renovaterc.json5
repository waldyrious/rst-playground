{
  // JSON Schema for this file. For a human-readable equivalent, see:
  // https://docs.renovatebot.com/configuration-options
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",

  // Use Renovate's default configuration as a base:
  // https://docs.renovatebot.com/presets-config/#configrecommended
  "extends": ["config:recommended"],

  // Always rebase PRs, rather than just if there are git conflicts:
  // https://docs.renovatebot.com/configuration-options/#rebasewhen
  // This is to allow semi-linear git history:
  // https://www.bitsnbites.eu/a-tidy-linear-git-history/
  "rebaseWhen": "behind-base-branch",

  // Support upgrading dependencies specified as git submodules:
  // https://docs.renovatebot.com/modules/manager/git-submodules/
  "git-submodules": {
    enabled: true,
  },

  // Support upgrading Pyodide's jsDelivr URL using a custom manager:
  // https://docs.renovatebot.com/modules/manager/regex/
  "customManagers": [
    {
      customType: "regex",
      managerFilePatterns: ["index.xhtml"],
      datasourceTemplate: "npm",
      matchStrings: ["cdn\\.jsdelivr\\.net/(?<packageName>pyodide)/v(?<currentValue>[0-9\\.]+)/"],
    },
  ],

  // Batch updates of the same type into a single PR:
  // https://docs.renovatebot.com/noise-reduction/#package-grouping
  "packageRules": [
    {
      matchManagers: ["github-actions"],
      groupName: "GitHub Actions",
      schedule: "monthly",
    },
    {
      matchManagers: ["git-submodules"],
      groupName: "git submodules",
      schedule: "at any time",
    },
    {
      matchPackageNames: ["pyodide"],
      groupName: "Pyodide",
      schedule: "monthly",
    },
  ],
}
